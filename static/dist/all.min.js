!function(e,t){function i(e,i){e.priceWatches=t.map(i.data,function(e){var i=t.filter(e.PriceLogs,function(e){return e.lowest_business_price&&e.lowest_anytime_price&&e.lowest_get_away_price?!0:!1});return i.length&&(e.lastPriceLog=i[i.length-1],e=t.assign({},e,{businessPrices:{min:t.min(i,"lowest_business_price").lowest_business_price,max:t.max(i,"lowest_business_price").lowest_business_price,avg:t.sum(i,"lowest_business_price")/i.length},anytimePrices:{min:t.min(i,"lowest_anytime_price").lowest_anytime_price,max:t.max(i,"lowest_anytime_price").lowest_anytime_price,avg:t.sum(i,"lowest_anytime_price")/i.length},getAwayPrices:{min:t.min(i,"lowest_get_away_price").lowest_get_away_price,max:t.max(i,"lowest_get_away_price").lowest_get_away_price,avg:t.sum(i,"lowest_get_away_price")/i.length}})),e}),console.log(e.priceWatches)}var s=e.module("airtix",["ui.router","angularMoment"]);s.config(function(e,t){t.otherwise("/home"),e.state("home",{url:"/home",templateUrl:"partials/__home.html",controller:"HomeCtrl",resolve:{priceWatches:function(e){return e({url:"/api/price_watches"})}}})}),s.controller("HomeCtrl",["$scope","priceWatches",i])}(angular,_);